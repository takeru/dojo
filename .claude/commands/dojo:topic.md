---
description: "発展トピックを学ぶ（例: /topic cargo-internals）"
---

# 発展トピック学習

指定されたトピックを学習します。

## 使い方

```
/topic TOPIC_ID
```

または引数なしで実行すると、利用可能なトピック一覧を表示します：

```
/topic
```

## 処理手順

### 1. 引数なしの場合（トピック一覧表示）

1. **現在のコースのトピックを列挙**
   - `state/progress.json` から `current_course` を取得
   - `courses/{current_course}/course.json` の `topics` リストを読む
   - または `courses/{current_course}/topics/` ディレクトリを列挙
2. **progress.jsonから進捗を確認**
   - `courses[current_course].completed_topics` を確認
   - 完了済み（✅）
   - 未完了（⬜）
   - ロック中（🔒）- 前提ステージ未達成
3. **トピック一覧をAskUserQuestionで選択肢として提示**

### 2. トピックIDが指定された場合

1. **トピックファイルを読み込み**
   - `courses/{current_course}/course.json` を読み込む
   - `topics` 配列から指定されたIDに対応する `file` フィールドを取得
   - `courses/{current_course}/topics/{file}` を読む
   - 前提知識を確認

2. **前提条件チェック**
   - 前提ステージが `courses[current_course].completed_stages` に含まれるか確認
   - 未完了なら「まだこのトピックは早いかも」と伝える

3. **学習方法を選択肢で提示**
   ```
   質問: 「どのように学びますか？」
   選択肢:
   1. 詳しく教えてもらう - 先生が対話的に指導（5-15分）
   2. 要点だけ読む - ドキュメント形式で確認（2-5分）
   3. 戻る - トピック選択に戻る
   ```

4. **選択に応じた学習**

   **詳しく教えてもらう（対話形式）**:
   - トピックファイルの「対話形式の教え方ガイド」に従う
   - 現在のキャラクターの口調で説明
   - 実践課題があれば実行させる
   - 理解度確認の質問を投げかける
   - 最後にクリア条件を確認してトピック完了

   **要点だけ読む（ドキュメント形式）**:
   - トピックファイルの「要点」セクションを整形して表示
   - コード例を提示
   - 「実際に試してみる」「理解した」を選択肢提示
   - 「理解した」選択でトピック完了

5. **完了処理**
   - progress.jsonの `courses[current_course].completed_topics` に追加
   - トピック完了を褒める
   - 次のアクションを選択肢提示：
     - 他のトピックを見る
     - 関連トピックを見る（あれば）
     - ステージ学習に戻る

## トピック一覧

トピック一覧は `courses/{current_course}/course.json` の `topics` フィールドを参照してください。

## トピック完了の判定

トピックファイルに「クリア条件」があれば、それをチェックします。
なければ、生徒が「理解した」と答えたら完了とみなします。

対話形式の場合は、先生が判断します。

## キャラクター別の対応

### 対話形式の導入

- **錆師範**: 「ほう、〇〇について知りたいのじゃな。良い心がけじゃ」
- **ラスタ先輩**: 「お、〇〇を勉強するんだ！いいね！」
- **Ferris**: 「〇〇について学習します。準備はよろしいですか？」

### 完了時

- **錆師範**: 「見事じゃ！また一つ賢くなったのう」
- **ラスタ先輩**: 「やったね！〇〇マスター！」
- **Ferris**: 「〇〇の学習が完了しました。お疲れ様でした」

$ARGUMENTS
