---
description: "コースを切り替える（例: /dojo:course python-kindergarten）"
---

# コース切り替え

引数で指定されたコースに切り替えます。

## 使い方
```
/dojo:course COURSE_ID
```

または引数なしで実行すると、利用可能なコース一覧を表示します：

```
/dojo:course
```

## 処理手順

### 1. 引数なしの場合（コース一覧表示）

1. **courses/ ディレクトリのコースを列挙**
   - 各サブディレクトリの `course.json` を読む
   - コース名、説明、難易度を取得

2. **progress.jsonから進捗を確認**
   - 現在のコース（⭐）
   - 進行中のコース（進捗%を表示）
   - 未開始のコース

3. **コース一覧をAskUserQuestionで選択肢として提示**
   ```
   質問: 「どのコースを学びますか？」
   選択肢:
   - Rust基礎コース ⭐ (現在のコース)
   - Python幼稚園コース (未開始)
   - TypeScript上級コース 🔒 (前提：Rust基礎コース)
   ```

### 2. コースIDが指定された場合

1. **コースの存在確認**
   - `courses/COURSE_ID/course.json` が存在するか確認
   - 存在しない場合はエラーメッセージ

2. **コースメタデータ読み込み**
   - `courses/COURSE_ID/course.json` を読む
   - コース名、説明、前提条件、総ステージ数を確認

3. **前提条件チェック**
   - `prerequisites` フィールドを確認
   - 必要な前提コースが完了しているか確認
   - 未完了なら警告を表示するが、強制はしない

4. **進捗の初期化（初回の場合）**
   - `progress.json` の `courses[COURSE_ID]` が存在しない場合は初期化：
   ```json
   {
     "current_stage": 1,
     "completed_stages": [],
     "completed_topics": [],
     "unlocked_topics": [],
     "topic_progress": {},
     "stats": {
       "main_progress": 0.0,
       "topic_completion": 0.0,
       "total_study_time_minutes": 0
     }
   }
   ```

5. **進捗更新**
   - `state/progress.json` の `current_course` を更新
   - `last_activity` にタイムスタンプを記録

6. **コース切り替えの案内**
   - 現在のキャラクターの口調で
   - コースの説明を簡潔に伝える
   - 現在のステージから再開できることを伝える
   - 「学習を始めますか？」と選択肢提示：
     - `/dojo:start` を実行
     - ステージを選ぶ
     - 戻る

## コース一覧表示形式

```
📚 利用可能なコース

🦀 Rust基礎コース ⭐ (現在)
   - Rustの基礎から所有権まで学ぶ入門コース
   - 難易度: 初級 | ステージ: 3/9 完了
   - 進捗: ████⚫⚫⚫⚫⚫ 33%

🐍 Python幼稚園コース
   - Pythonの基本を楽しく学ぶ
   - 難易度: 入門 | ステージ: 未開始
   - 進捗: ⚫⚫⚫⚫⚫⚫⚫⚫⚫ 0%

⚡ TypeScript上級コース 🔒
   - 型システムを極める実践コース
   - 難易度: 上級 | 前提: Rust基礎コース
   - 進捗: ロック中
```

## 注意事項

- コースはいつでも切り替え可能
- 前提条件は推奨であって必須ではない
- 各コースの進捗は独立して保存される
- キャラクターは全コース共通（コース専用キャラも設定可能）

## キャラクター別の案内

### コース切り替え時

- **錆師範**: 「ほう、〇〇コースに挑むか。心がけは良い。では始めようか」
- **ラスタ先輩**: 「〇〇コースだね！面白そう！一緒に頑張ろう！」
- **Ferris**: 「〇〇コースに切り替えます。それでは学習を開始しましょう」

### 前提条件未達成時

- **錆師範**: 「まだ早いかもしれんが、挑戦するなら止めはせぬ」
- **ラスタ先輩**: 「ちょっと難しいかもだけど、やってみる？」
- **Ferris**: 「前提条件を満たしていませんが、続行しますか？」

$ARGUMENTS
