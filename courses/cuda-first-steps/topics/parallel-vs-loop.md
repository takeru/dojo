# トピック: なぜforループを書かないの？

## メタ情報

- **ID**: parallel-vs-loop
- **難易度**: 初級
- **所要時間**: 3-5分（対話形式）/ 1-2分（読み物）
- **カテゴリ**: 並列プログラミング

## 前提知識

- Stage 2完了

## このトピックで学べること

- CPUの逐次処理とGPUの並列処理の違い
- forループを並列化する考え方
- 各スレッドが1要素を担当する方式

## 関連ステージ

- Stage 2: CPUとGPUで同じことをやってみる

## 要点（ドキュメント形式用）

GPUでは、**多数のスレッドが並列に動く**ので、forループの代わりに各スレッドが1要素ずつ処理します。

### CPU版（逐次処理）

```c
for (int i = 0; i < 10; i++) {
    arr[i] = arr[i] * 2;  // 順番に処理
}
```

### GPU版（並列処理）

```cuda
// スレッド0: arr[0] を処理
// スレッド1: arr[1] を処理
// ...
// スレッド9: arr[9] を処理
// → 全部同時に実行！
int idx = threadIdx.x;
arr[idx] = arr[idx] * 2;
```

### イメージ

**CPU**: 1人が10回作業
**GPU**: 10人が1回ずつ作業（同時）

## 対話形式の教え方ガイド（先生用）

### 導入

「CPU版はforループで書くのに、GPU版では書かないのはなぜ？」

### 説明の流れ

1. **CPU版とGPU版を並べて比較**
2. **並列処理のイメージを説明**
   「forループを10スレッドに分散させたイメージ」
3. **threadIdx.x の役割**
   「各スレッドが自分の担当を知るためのID」

## クリア条件（オプション）

- [ ] forループを使わない理由を説明できる
- [ ] 並列処理の考え方を理解している

## 補足情報

### 参考リンク

- [CUDA C++ Programming Guide - Thread Hierarchy](https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#thread-hierarchy)
