# トピック: Cargo.tomlの中身

## メタ情報

- **ID**: cargo-toml
- **難易度**: 初級
- **所要時間**: 6-8分（対話形式）/ 3分（読み物）
- **カテゴリ**: 開発ツール

## 前提知識

- Stage 2完了（cargo newでプロジェクトを作成したことがある）

## このトピックで学べること

- Cargo.tomlの構造
- 主要なフィールドの意味
- Rustエディションについて

## 関連ステージ

- Stage 2: Hello World（ここで登場）

## 要点（ドキュメント形式用）

### Cargo.tomlとは

Cargo.tomlはプロジェクトの設定ファイルです。TOML形式で書かれています。

### 基本構造

```toml
[package]
name = "hello_world"          # プロジェクト名
version = "0.1.0"             # バージョン（セマンティックバージョニング）
edition = "2021"              # Rustエディション
authors = ["Your Name"]       # 作者（オプション）
description = "説明"          # パッケージの説明（オプション）

[dependencies]
# ここに使いたいライブラリを書く
# 例: serde = "1.0"
```

### 主要なフィールド

| フィールド | 説明 |
|-----------|------|
| `name` | パッケージ名（必須） |
| `version` | バージョン（必須） |
| `edition` | Rustエディション（推奨） |
| `authors` | 作者リスト |
| `description` | 説明文 |
| `license` | ライセンス |

### Rustエディションとは？

Rustは後方互換性を保ちながら進化するため、「エディション」という仕組みがあります：

| エディション | リリース年 | 主な変更 |
|-------------|-----------|---------|
| 2015 | 2015 | 最初のエディション |
| 2018 | 2018 | async/await、モジュールシステム改善 |
| 2021 | 2021 | 最新（現在のデフォルト） |

古いコードも動くように、エディションを指定します。

### 依存関係の追加

```toml
[dependencies]
serde = "1.0"                 # バージョン指定
rand = { version = "0.8", features = ["small_rng"] }  # 詳細指定
```

## 対話形式の教え方ガイド（先生用）

### 導入

「Cargo.tomlって見たことあるじゃろう？中身を詳しく見てみるのじゃ」

### 説明の流れ

1. **ファイルを開いて確認**
   ```bash
   cat Cargo.toml
   ```

2. **各フィールドを説明**
   「name、version、editionが基本じゃ」

3. **エディションを説明**
   「Rustは進化するが、古いコードも動くようにエディションがあるのじゃ」

4. **dependenciesを紹介**
   「ライブラリを使いたいときはここに書くのじゃ」

## クリア条件（オプション）

- [ ] Cargo.tomlの基本構造を理解している
- [ ] 主要なフィールドの意味を説明できる
- [ ] エディションの役割を理解している

## 補足情報

### Cargo.lock

`Cargo.lock` は依存関係の正確なバージョンを記録するファイルです：
- ライブラリの場合: gitに入れない
- アプリケーションの場合: gitに入れる（再現可能なビルドのため）

### ワークスペース

複数のパッケージをまとめるワークスペース機能：

```toml
[workspace]
members = ["crate1", "crate2"]
```

### 参考リンク

- Cargo Book: https://doc.rust-lang.org/cargo/reference/manifest.html
- TOML: https://toml.io/
