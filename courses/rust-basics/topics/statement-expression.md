# トピック: 文と式の深掘り

## メタ情報

- **ID**: statement-expression
- **難易度**: 初級
- **所要時間**: 6-8分（対話形式）/ 3分（読み物）
- **カテゴリ**: 関数

## 前提知識

- Stage 4完了（関数の基本）

## このトピックで学べること

- 文（statement）と式（expression）の違い
- Rustが式指向言語である理由
- ブロック式の活用

## 関連ステージ

- Stage 4: 関数（ここで登場）

## 要点（ドキュメント形式用）

### Rustは「式指向」言語

Rustでは、ほとんどの構文が値を返す「式」として機能します。

### 文（Statement）

- 値を返さない
- 末尾に `;` をつける
- 例：`let x = 5;`

```rust
let x = 5;  // 文
// let y = (let z = 6);  // エラー！letは文なので値を返さない
```

### 式（Expression）

- 値を返す
- 末尾に `;` をつけない
- 例：`5 + 6`、`{ let x = 5; x + 1 }`

```rust
let x = 5 + 6;  // 5 + 6 は式

let y = {
    let a = 5;
    let b = 6;
    a + b  // <- ; なし！これが式の結果
};
println!("{}", y);  // 11
```

### よくある間違い

```rust
// 正しい
let x = {
    let a = 5;
    a + 1  // 式（値を返す）
};
println!("{}", x);  // 6

// 間違い
let x = {
    let a = 5;
    a + 1;  // ; があると () が返される
};
println!("{:?}", x);  // ()
```

### ifも式

```rust
let number = if true { 5 } else { 6 };
println!("{}", number);  // 5
```

## 対話形式の教え方ガイド（先生用）

### 導入

「文と式って何が違うのか、深く理解すると関数の戻り値がスッキリわかるぞ」

### 説明の流れ

1. **基本の違いを説明**
   「文は値を返さない、式は値を返す。セミコロンの有無で決まるのじゃ」

2. **ブロック式を実演**
   ```rust
   let x = {
       let a = 5;
       a + 1
   };
   println!("{}", x);
   ```

3. **よくある間違いを見せる**
   「セミコロンをつけると () が返されるのじゃ」

4. **ifが式であることを示す**
   ```rust
   let x = if true { 5 } else { 6 };
   ```

## クリア条件（オプション）

- [ ] 文と式の違いを説明できる
- [ ] ブロック式を使って値を返せる
- [ ] セミコロンの影響を理解している

## 補足情報

### なぜ式指向なのか

式指向言語の利点：
- 変数への代入が簡潔になる
- 関数型プログラミングとの相性が良い
- 冗長な一時変数を減らせる

### 参考リンク

- The Rust Book: https://doc.rust-lang.org/book/ch03-03-how-functions-work.html#statements-and-expressions
